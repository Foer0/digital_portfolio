{% extends "base.html" %}

{% block breadcrumbs %}
{{ super() }}
<li class="breadcrumb-item"><a href="{{ url_for('employer.dashboard') }}">Кабинет работодателя</a></li>
<li class="breadcrumb-item active">Портфолио соискателя</li>
{% endblock %}

{% block content %}
<div class="container">
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <div class="card hover-scale">
                <div class="card-header bg-dark-green text-white d-flex justify-content-between align-items-center">
                    <h4 class="mb-0">Портфолио соискателя</h4>
                    <div>
                        {% if not portfolio.is_public %}
                        <span class="badge bg-warning me-1">Приватное</span>
                        {% endif %}
                        {% if portfolio.is_approved %}
                        <span class="badge bg-success">Одобрено модератором</span>
                        {% else %}
                        <span class="badge bg-warning">На модерации</span>
                        {% endif %}
                    </div>
                </div>
                <div class="card-body">
                    <!-- Уведомление о модерации -->
                    {% if not portfolio.is_approved %}
                    <div class="alert alert-warning mb-4" role="alert">
                        <i class="bi bi-exclamation-triangle"></i>
                        Это портфолио находится на модерации. Некоторые функции могут быть ограничены.
                    </div>
                    {% endif %}

                    <!-- Основная информация -->
                    <div class="row mb-4">
                        <div class="col-md-8">
                            <h2>{{ portfolio.title }}</h2>
                            <p class="text-muted">{{ portfolio.user.name }}</p>

                            {% if portfolio.profession %}
                            <div class="mb-3">
                                <strong>Профессия:</strong> {{ portfolio.profession }}
                            </div>
                            {% endif %}

                            {% if portfolio.experience_years %}
                            <div class="mb-3">
                                <strong>Опыт работы:</strong> {{ portfolio.experience_years }} лет
                            </div>
                            {% endif %}
                        </div>
                        <div class="col-md-4 text-end">
                            <div class="floating-element">
                                <i class="bi bi-person-badge" style="font-size: 4rem; color: var(--light-green);"></i>
                            </div>
                        </div>
                    </div>

                    <!-- О себе -->
                    {% if portfolio.bio %}
                    <div class="mb-4">
                        <h5 class="border-bottom pb-2">О себе</h5>
                        <p class="mb-0">{{ portfolio.bio }}</p>
                    </div>
                    {% endif %}

                    <!-- Навыки -->
                    {% if portfolio.skills %}
                    <div class="mb-4">
                        <h5 class="border-bottom pb-2">Навыки</h5>
                        <div class="skills-container">
                            {% for skill in portfolio.skills.split(',') %}
                            <span class="badge bg-light-green text-dark me-2 mb-2 p-2">{{ skill.strip() }}</span>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}

                    <!-- Образование -->
                    {% if portfolio.education %}
                    <div class="mb-4">
                        <h5 class="border-bottom pb-2">Образование</h5>
                        <div class="education-content">
                            {{ portfolio.education|replace('\n', '<br>')|safe }}
                        </div>
                    </div>
                    {% endif %}

                    <!-- Проекты и достижения -->
                    {% if portfolio.projects %}
                    <div class="mb-4">
                        <h5 class="border-bottom pb-2">Проекты и достижения</h5>
                        <div class="projects-content">
                            {{ portfolio.projects|replace('\n', '<br>')|safe }}
                        </div>
                    </div>
                    {% endif %}

                    <!-- Контактная информация -->
                    {% if portfolio.contact_info %}
                    <div class="mb-4">
                        <h5 class="border-bottom pb-2">Контактная информация</h5>
                        <div class="contact-content">
                            {{ portfolio.contact_info|replace('\n', '<br>')|safe }}
                        </div>
                    </div>
                    {% endif %}

                    <div class="mt-4 pt-3 border-top">
                        <small class="text-muted">
                            Портфолио создано: {{ portfolio.created_at.strftime('%d.%m.%Y') }} |
                            Обновлено: {{ portfolio.updated_at.strftime('%d.%m.%Y') if portfolio.updated_at else portfolio.created_at.strftime('%d.%m.%Y') }}
                        </small>
                    </div>
                </div>
                <div class="card-footer bg-transparent">
                    <a href="{{ url_for('employer.dashboard') }}" class="btn btn-outline-secondary">
                        ← Назад к кабинету
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}